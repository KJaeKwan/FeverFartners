{% extends 'base.html' %}

{% block content %}
<style>
  .tab-container {
    display: flex;
    border-radius: 20px;
    margin-bottom: 20px; /* 디자인에 맞게 마진 값 조정 */
    width: 100%; /* 컨테이너의 너비를 부모 요소의 100%로 설정 */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* 그림자 효과 추가 */
  }

  .tab-container a {
    text-decoration: none;
    flex-grow: 1; /* 모든 탭이 동일한 너비를 가지도록 설정 */
    text-align: center; /* 텍스트를 탭 중앙으로 정렬 */
    padding: 20px 0; /* 상하 패딩 증가 */
    box-sizing: border-box; /* 패딩과 보더가 너비에 포함되도록 설정 */
    border: none; /* 테두리 없음 */
    outline: none; /* 아웃라인 없음 */
    transition: background-color 0.3s; /* 배경색 변경시 트랜지션 효과 */
    font-size: 1.7rem; /* 텍스트 크기 증가 */
  }
  .inactive {
    background-color: #D9D9D9;
    color: #db4455;
  }
  /* 공지 탭이 활성화되었을 때의 스타일 */
  .notice-active {
    background-color: #DB4455; /* 활성 탭 배경 색상 */
    color: white; /* 활성 탭 텍스트 색상 */
    border-top-left-radius: 20px; /* 왼쪽 상단 모서리 둥글게 */
    border-bottom-left-radius: 20px; /* 왼쪽 하단 모서리 둥글게 */
  }

  /* 공지 탭이 비활성화되었을 때의 스타일 */
  .notice-inactive {
    background-color: #D9D9D9; /* 비활성 탭 배경 색상 */
    color: #DB4455; /* 비활성 탭 텍스트 색상 */
    border-top-left-radius: 20px; /* 왼쪽 상단 모서리 둥글게 */
    border-bottom-left-radius: 20px; /* 왼쪽 하단 모서리 둥글게 */
  }

  /* 커뮤니티 탭이 활성화되었을 때의 스타일 */
  .community-active {
    background-color: #DB4455; /* 활성 탭 배경 색상 */
    color: white; /* 활성 탭 텍스트 색상 */
    border-top-right-radius: 20px; /* 오른쪽 상단 모서리 둥글게 */
    border-bottom-right-radius: 20px; /* 오른쪽 하단 모서리 둥글게 */
  }

  /* 커뮤니티 탭이 비활성화되었을 때의 스타일 */
  .community-inactive {
    background-color: #D9D9D9; /* 비활성 탭 배경 색상 */
    color: #DB4455; /* 비활성 탭 텍스트 색상 */
    border-top-right-radius: 20px; /* 오른쪽 상단 모서리 둥글게 */
    border-bottom-right-radius: 20px; /* 오른쪽 하단 모서리 둥글게 */
  }


  .board-table {
    width: 100%;
    border-collapse: collapse;
  }

  .board-table thead th {
    background-color: #db4455;
    color: white;
    padding: 10px 0;
  }

  .board-table tbody td {
    padding: 10px 0;
    border-bottom: 1px solid #ccc;
  }

  .board-table tbody tr:first-child td {
    padding-top: 10px;
  }

  .board-table tbody tr:last-child td {
    padding-bottom: 10px;
    border-bottom: none;
  }

  .footer {
    height: 100px;
    position: fixed;
    bottom: 0;
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 40px;
    background-color: #f2f2f2;
  }
  .footer-link {
      text-decoration: none;
  }
</style>

<div class="content-wrapper">
  <div class="header">
    <script src="https://kit.fontawesome.com/aa0228ade6.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/2.5.0/remixicon.css">
    <div class="header" style="background-color: #db4455; color: white; text-align: center; padding: 20px 0; font-size: 2em; font-family: sans-serif; position: relative;">
      <a href="{% url 'group_activity:main_page' room_id %}"><i class="ri-arrow-drop-left-line back-arrow" style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); font-size: 3.5rem; cursor: pointer; color: white;"></i></a>
      <p style="font-weight: bold; margin-bottom: 0">자유게시판</p>
    </div>
  </div>

  <div class="container my-3">
    <div class="tab-container">
      <a href="?tab=notice" class="{% if tab == 'notice' %}notice-active{% else %}notice-inactive{% endif %}">공지</a>
      <a href="?tab=free" class="{% if tab == 'free' %}community-active{% else %}community-inactive{% endif %}">자유</a>
    </div>
    <br>
    <table style="width: 100%" class="board-table">
      <thead class="thead">
        <tr class="text-center table-title" style="background-color: #db4455; color: white; width: auto; text-align: center; justify-content: space-around;">
          <th>제목</th>
          <th>추천수</th>
          <th>작성자</th>
          <th>작성 일시</th>
        </tr>
      </thead>
      <tbody class="tbody" style="border-bottom: 1px solid #ccc;">
        {% for post in page_obj %}
          <tr class="text-center">
            <td class="text-left">
              {% if tab == 'free' and post.notice %}
              <span style="color: #db4455">공지</span>
              {% endif %}
              <a href="{% url 'free_board:detail' post.room.id post.id %}" style="color: black; text-decoration: none">{{ post.title }}</a>
              {% if post.comments.count > 0 %}
              <span class="text-danger small ml-2">{{ post.comments.count }}</span>
              {% endif %}
            </td>
            <td>{{ post.voter.all.count }}</td>
            <td>{{ post.author.nickname }}</td>
            <td>{{ post.created_at|date:"Y-m-d H:i" }}</td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="4">게시물이 없습니다.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    <br>
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
        <li class="page-item">
            <a class="page-link" href="?tab={{ tab }}&page={{ page_obj.previous_page_number }}">이전</a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link">이전</a>
        </li>
        {% endif %}
        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
            <li class="page-item active"><a class="page-link" href="?tab={{ tab }}&page={{ num }}">{{ num }}</a></li>
            {% elif num > page_obj.number|add:'-5' and num < page_obj.number|add:'5' %}
            <li class="page-item"><a class="page-link" href="?tab={{ tab }}&page={{ num }}">{{ num }}</a></li>
            {% endif %}
        {% endfor %}
        {% if page_obj.has_next %}
        <li class="page-item">
            <a class="page-link" href="?tab={{ tab }}&page={{ page_obj.next_page_number }}">다음</a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link">다음</a>
        </li>
        {% endif %}
    </ul>
    <br>
    <div class="text-right">
      <a href="{% url 'free_board:create_post' study_room_id=room_id %}" class="btn" style="background-color: #db4455; color: white; border-radius: 8px; float: right;">새 글 작성하기</a>
    </div>
  </div>
</div>

<footer class="footer">
  <a href="#" class="footer-link" style="display: flex;">
    <div class="footer-item">
      <i class="fa-solid fa-user-group footer-icon" style="font-size: 30px; color: #db4455; margin-bottom: 10px; margin-left: 4px"></i>
      <div class="footer-text" style="color: #db4455; font-size: 16px; font-style: italic;">Group</div>
    </div>
  </a>
  <a href="#" class="footer-link" style="display: flex">
    <div class="footer-item">
      <i class="fa-solid fa-bullseye footer-icon" style="font-size: 30px; color: #db4455; margin-bottom: 10px; margin-left: 10px"></i>
      <div class="footer-text" style="color: #db4455; font-size: 16px; font-style: italic;">MyGoal</div>
    </div>
  </a>
  <a href="#" class="footer-link" style="display: flex;">
    <div class="footer-item">
      <i class="ri-file-list-3-line footer-icon" style="font-size: 30px; color: #db4455; margin-bottom: 10px;"></i>
      <div class="footer-text" style="color: #db4455; font-size: 16px; font-style: italic;">null</div>
    </div>
  </a>
</footer>
{% endblock %}
