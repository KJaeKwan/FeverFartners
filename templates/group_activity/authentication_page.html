{% extends 'group_activity/group_activity_base.html' %}

{% block content %}
  {% for auth in authentications %}
  {% if auth.start > current_time %}
    <div>아직 인증이 시작되지 않았습니다</div>
    <div>인증시간: {{auth.start | date:"m월 d일"}} {{auth.start | time:"H:i"}} ~ {{auth.end | date:"m월 d일"}} {{auth.end | time:"H:i"}}</div>
  {% elif auth.end < current_time %}
    {% if user == room.master %}
      <div>이미 종료된 인증입니다.</div>
      <div>인증시간: {{auth.start | date:"m월 d일"}} {{auth.start | time:"H:i"}} ~ {{auth.end | date:"m월 d일"}} {{auth.end | time:"H:i"}}</div>
      <a href="{% url 'group_activity:close_auth' room.pk auth.pk %}">인증 마감</a>
    {% endif %}
  {% else %}
    <div>현재 인증이 진행되고 있습니다!</div>
    <div>인증시간: {{auth.start | date:"m월 d일"}} {{auth.start | time:"H:i"}} ~ {{auth.end | date:"m월 d일"}} {{auth.end | time:"H:i"}}</div>
    {% if user in auth.participated.all %}
      <div>참여완료</div>
    {% else %}
      <a href="{% url 'group_activity:create_authentication' room.pk auth.pk %}" onclick="return checkCurTime({{ auth.end|date:'U' }}000)">인증하기</a>
    {% endif %}
  {% endif %}
  <div>--------------임시 구분선(삭제바람)----------------</div>
  {% endfor %}
  {% if user == room.master %}
    <a href="{% url 'group_activity:create_auth' room.pk %}">인증 개설</a>
  {% endif %}
{% endblock content %}
